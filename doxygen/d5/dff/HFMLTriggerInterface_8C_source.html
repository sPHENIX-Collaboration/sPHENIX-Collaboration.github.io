<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=9" />
<title>Analysis Software: analysis/blob/master/HF-Jet/HFMLTrigger/HFMLTriggerInterface.C Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script> <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script> 
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
	<div id="top">
		<!-- do not remove this div, it is closed by doxygen! -->
		<div id="titlearea">
			<table cellspacing="0" cellpadding="0">
				<tbody>
					<tr style="height: 56px;">
						<td id="projectlogo"><a href="https://wiki.bnl.gov/sPHENIX/index.php/Main_Page"><img
								alt="Logo" src="../../sphenix.png" /></a></td>
						<td style="padding-left: 0.5em;">
							<div id="projectname">
								Analysis Software
							</div> 
							<div id="projectbrief">
								Documentation for <a href="https://wiki.bnl.gov/sPHENIX/index.php/Main_Page">sPHENIX</a> simulation software
							</div> 
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Home&#160;page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../usergroup0.html"><span>External&#160;Links</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d5/dff/HFMLTriggerInterface_8C_source.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">HFMLTriggerInterface.C</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d5/dff/HFMLTriggerInterface_8C.html">Go to the documentation of this file.</a> Or view <a target="top" href="https://github.com/sPHENIX-Collaboration//analysis/blob/master/HF-Jet/HFMLTrigger/HFMLTriggerInterface.C">the newest version in sPHENIX GitHub for file HFMLTriggerInterface.C</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/df3/HFMLTriggerInterface_8h.html">HFMLTriggerInterface.h</a>&quot;</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../da/dc1/Fun4AllReturnCodes_8h.html">fun4all/Fun4AllReturnCodes.h</a>&gt;</span></div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">#include &lt;pdbcalbase/PdbParameterMap.h&gt;</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d8/d30/PHCompositeNode_8h.html">phool/PHCompositeNode.h</a>&gt;</span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d9/d36/PHTimeServer_8h.html" title="PHTimer server for accessing external information.">phool/PHTimeServer.h</a>&gt;</span></div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../dc/d26/PHTimer_8h.html" title="high precision timer">phool/PHTimer.h</a>&gt;</span></div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../dd/dd4/getClass_8h.html">phool/getClass.h</a>&gt;</span></div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d8/d30/PHCompositeNode_8h.html">phool/PHCompositeNode.h</a>&gt;</span></div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../de/d83/PHG4Hit_8h.html">g4main/PHG4Hit.h</a>&gt;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../dd/d05/PHG4Particle_8h.html">g4main/PHG4Particle.h</a>&gt;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d0/d25/PHG4TruthInfoContainer_8h.html">g4main/PHG4TruthInfoContainer.h</a>&gt;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &lt;g4mvtx/PHG4CylinderGeom_MVTX.h&gt;</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../df/dff/PHG4Cell_8h.html">g4detectors/PHG4Cell.h</a>&gt;</span></div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../dd/d32/PHG4CellContainer_8h.html">g4detectors/PHG4CellContainer.h</a>&gt;</span></div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d4/da1/PHG4CylinderCellGeom_8h.html">g4detectors/PHG4CylinderCellGeom.h</a>&gt;</span></div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d4/d90/PHG4CylinderCellGeomContainer_8h.html">g4detectors/PHG4CylinderCellGeomContainer.h</a>&gt;</span></div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d9/d44/PHG4CylinderGeom_8h.html">g4detectors/PHG4CylinderGeom.h</a>&gt;</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d6/db8/PHG4CylinderGeomContainer_8h.html">g4detectors/PHG4CylinderGeomContainer.h</a>&gt;</span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../db/d63/SvtxCluster_8h.html">trackbase_historic/SvtxCluster.h</a>&gt;</span></div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d9/d40/SvtxClusterMap_8h.html">trackbase_historic/SvtxClusterMap.h</a>&gt;</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d2/dd4/SvtxHit_8h.html">trackbase_historic/SvtxHit.h</a>&gt;</span></div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d3/dfe/SvtxHitMap_8h.html">trackbase_historic/SvtxHitMap.h</a>&gt;</span></div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d0/d87/SvtxTrack_8h.html">trackbase_historic/SvtxTrack.h</a>&gt;</span></div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d7/d9f/SvtxTrackMap_8h.html">trackbase_historic/SvtxTrackMap.h</a>&gt;</span></div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../dc/dc1/SvtxVertex_8h.html">trackbase_historic/SvtxVertex.h</a>&gt;</span></div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d0/d19/SvtxVertexMap_8h.html">trackbase_historic/SvtxVertexMap.h</a>&gt;</span></div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d3/d59/SvtxEvalStack_8h.html">g4eval/SvtxEvalStack.h</a>&gt;</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &lt;HepMC/GenEvent.h&gt;</span></div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &lt;HepMC/GenVertex.h&gt;</span></div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d3/d8c/PHHepMCGenEvent_8h.html">phhepmc/PHHepMCGenEvent.h</a>&gt;</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="../../d4/dd2/PHHepMCGenEventMap_8h.html">phhepmc/PHHepMCGenEventMap.h</a>&gt;</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &lt;TDatabasePDG.h&gt;</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &lt;TFile.h&gt;</span></div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &lt;TH2F.h&gt;</span></div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &lt;TH3F.h&gt;</span></div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &lt;TLorentzVector.h&gt;</span></div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &lt;TString.h&gt;</span></div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &lt;TTree.h&gt;</span></div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &lt;rapidjson/document.h&gt;</span></div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &lt;rapidjson/ostreamwrapper.h&gt;</span></div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &lt;rapidjson/prettywriter.h&gt;</span></div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="preprocessor">#include &lt;boost/format.hpp&gt;</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="preprocessor">#include &lt;boost/property_tree/json_parser.hpp&gt;</span></div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;<span class="preprocessor">#include &lt;boost/property_tree/ptree.hpp&gt;</span></div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;<span class="preprocessor">#include &lt;boost/property_tree/xml_parser.hpp&gt;</span></div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;<span class="preprocessor">#include &lt;cassert&gt;</span></div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="preprocessor">#include &lt;cstddef&gt;</span></div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;<span class="keyword">using namespace </span>std;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div>
<div class="line"><a name="l00068"></a><span class="lineno"><a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#afe931222bc454c99a888ba9f8db40d43">   68</a></span>&#160;<a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#afe931222bc454c99a888ba9f8db40d43">HFMLTriggerInterface::HFMLTriggerInterface</a>(std::string <a class="code" href="../../d4/d23/Prototype2_2EMCal_2macros_2EnergyCalibFit_8m.html#a2ff994e16bf9521154de4cf659a3b689">filename</a>)</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;  : <a class="code" href="../../d0/d32/classSubsysReco.html">SubsysReco</a>(<span class="stringliteral">&quot;HFMLTriggerInterface&quot;</span>)</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;  , _ievent(0)</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;  , _f(nullptr)</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;  , _eta_min(-1)</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;  , _eta_max(1)</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  , _embedding_id(1)</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;  , _nlayers_maps(3)</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  , _svtxevalstack(nullptr)</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;  , m_hitMap(nullptr)</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  , m_Geoms(nullptr)</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;  , m_truthInfo(nullptr)</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  , m_Flags(nullptr)</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  , m_hitStaveLayer(nullptr)</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  , m_hitModuleHalfStave(nullptr)</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;  , m_hitChipModule(nullptr)</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  , m_hitLayerMap(nullptr)</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;  , m_hitPixelPhiMap(nullptr)</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  , m_hitPixelPhiMapHL(nullptr)</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  , m_hitPixelZMap(nullptr)</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;{</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a3c69a07c77f9fe7caa967b98c79b8701">_foutname</a> = <a class="code" href="../../d4/d23/Prototype2_2EMCal_2macros_2EnergyCalibFit_8m.html#a2ff994e16bf9521154de4cf659a3b689">filename</a>;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;}</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;</div>
<div class="line"><a name="l00092"></a><span class="lineno"><a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a08acbe4ead3d17f7ea3eab4bdf96a364">   92</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a08acbe4ead3d17f7ea3eab4bdf96a364">HFMLTriggerInterface::Init</a>(<a class="code" href="../../d5/dca/classPHCompositeNode.html">PHCompositeNode</a>* topNode)</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;{</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a79d5048608160f7dc1e1634827508eb0">_ievent</a> = 0;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a5ae109e696472b24e63fec0a7cc66f41">_f</a> = <span class="keyword">new</span> TFile((<a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a3c69a07c77f9fe7caa967b98c79b8701">_foutname</a> + <span class="keywordtype">string</span>(<span class="stringliteral">&quot;.root&quot;</span>)).c_str(), <span class="stringliteral">&quot;RECREATE&quot;</span>);</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a999cdc49b3d672f5b3d973701472d509">m_jsonOut</a>.open((<a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a3c69a07c77f9fe7caa967b98c79b8701">_foutname</a> + <span class="keywordtype">string</span>(<span class="stringliteral">&quot;.json&quot;</span>)).c_str(), fstream::out);</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a999cdc49b3d672f5b3d973701472d509">m_jsonOut</a> &lt;&lt; <span class="stringliteral">&quot;{&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a999cdc49b3d672f5b3d973701472d509">m_jsonOut</a> &lt;&lt; <span class="stringliteral">&quot;\&quot;Events\&quot; : [&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  <span class="comment">//  _h2 = new TH2D(&quot;h2&quot;, &quot;&quot;, 100, 0, 100.0, 40, -2, +2);</span></div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="comment">//  _h2_b = new TH2D(&quot;h2_b&quot;, &quot;&quot;, 100, 0, 100.0, 40, -2, +2);</span></div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;  <span class="comment">//  _h2_c = new TH2D(&quot;h2_c&quot;, &quot;&quot;, 100, 0, 100.0, 40, -2, +2);</span></div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  <span class="comment">//  _h2all = new TH2D(&quot;h2all&quot;, &quot;&quot;, 100, 0, 100.0, 40, -2, +2);</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a3463a7fb4e302eb7504cf2d6aa121a27">m_hitLayerMap</a> = <span class="keyword">new</span> TH3F(<span class="stringliteral">&quot;hitLayerMap&quot;</span>, <span class="stringliteral">&quot;hitLayerMap&quot;</span>, 600, -10, 10, 600, -10, 10, 10, -.5, 9.5);</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;  <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a3463a7fb4e302eb7504cf2d6aa121a27">m_hitLayerMap</a>-&gt;SetTitle(<span class="stringliteral">&quot;hitLayerMap;x [mm];y [mm];Half Layers&quot;</span>);</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#ac5e615b74c6c2c95d72f941b1b62a7f0">m_hitPixelPhiMap</a> = <span class="keyword">new</span> TH3F(<span class="stringliteral">&quot;hitPixelPhiMap&quot;</span>, <span class="stringliteral">&quot;hitPixelPhiMap&quot;</span>, 16000, -.5, 16000 - .5, 600, -<a class="code" href="../../dd/de6/CylindricalHough_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a>, <a class="code" href="../../dd/de6/CylindricalHough_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a>, 10, -.5, 9.5);</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#ac5e615b74c6c2c95d72f941b1b62a7f0">m_hitPixelPhiMap</a>-&gt;SetTitle(<span class="stringliteral">&quot;hitPixelPhiMap;PixelPhiIndex in layer;phi [rad];Half Layers Index&quot;</span>);</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a39d952af04de5a038e68a79533f6f5e9">m_hitPixelPhiMapHL</a> = <span class="keyword">new</span> TH3F(<span class="stringliteral">&quot;hitPixelPhiMapHL&quot;</span>, <span class="stringliteral">&quot;hitPixelPhiMapHL&quot;</span>, 16000, -.5, 16000 - .5, 600, -<a class="code" href="../../dd/de6/CylindricalHough_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a>, <a class="code" href="../../dd/de6/CylindricalHough_8h.html#ae71449b1cc6e6250b91f539153a7a0d3">M_PI</a>, 10, -.5, 9.5);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a39d952af04de5a038e68a79533f6f5e9">m_hitPixelPhiMapHL</a>-&gt;SetTitle(<span class="stringliteral">&quot;hitPixelPhiMap;PixelPhiIndex in half layer;phi [rad];Half Layers Index&quot;</span>);</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;  <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a5e22b6b8b630b9cde989fdc26a0ae9e2">m_hitPixelZMap</a> = <span class="keyword">new</span> TH3F(<span class="stringliteral">&quot;hitPixelZMap&quot;</span>, <span class="stringliteral">&quot;hitPixelZMap&quot;</span>, 16000, -.5, 16000 - .5, 600, 15, 15, 10, -.5, 9.5);</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;  <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a5e22b6b8b630b9cde989fdc26a0ae9e2">m_hitPixelZMap</a>-&gt;SetTitle(<span class="stringliteral">&quot;hitPixelZMap;hitPixelZMap;z [cm];Half Layers&quot;</span>);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;  <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a14cfc4b19e44abb5f98fc464de6cd36b">m_hitStaveLayer</a> = <span class="keyword">new</span> TH2F(<span class="stringliteral">&quot;hitStaveLayer&quot;</span>, <span class="stringliteral">&quot;hitStaveLayer&quot;</span>, 100, -.5, 100 - .5, 10, -.5, 9.5);</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;  <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a14cfc4b19e44abb5f98fc464de6cd36b">m_hitStaveLayer</a>-&gt;SetTitle(<span class="stringliteral">&quot;hitStaveLayer;Stave index;Half Layers&quot;</span>);</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;  <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#af287790982ce85699d24f6f77ee69631">m_hitModuleHalfStave</a> = <span class="keyword">new</span> TH2F(<span class="stringliteral">&quot;hitModuleHalfStave&quot;</span>, <span class="stringliteral">&quot;hitModuleHalfStave&quot;</span>, 100, -.5, 100 - .5, 10, -.5, 9.5);</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;  <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#af287790982ce85699d24f6f77ee69631">m_hitModuleHalfStave</a>-&gt;SetTitle(<span class="stringliteral">&quot;hitModuleHalfStave;Module index;Half Stave&quot;</span>);</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;  <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a1bc93cadf5d74ef6b04d13db4ff065ab">m_hitChipModule</a> = <span class="keyword">new</span> TH2F(<span class="stringliteral">&quot;hitChipModule&quot;</span>, <span class="stringliteral">&quot;hitChipModule&quot;</span>, 100, -.5, 100 - .5, 10, -.5, 9.5);</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;  <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a1bc93cadf5d74ef6b04d13db4ff065ab">m_hitChipModule</a>-&gt;SetTitle(<span class="stringliteral">&quot;hitChipModule;Chip;Module&quot;</span>);</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d1/d38/namespaceFun4AllReturnCodes.html#ada0752d5c8986cf16a6c49dab6ab0db7affeaf5c83d68b72a5c44f2660d44ab6b">Fun4AllReturnCodes::EVENT_OK</a>;</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;}</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;</div>
<div class="line"><a name="l00128"></a><span class="lineno"><a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#ab8ba4c5120a26a07a84d0e2c418bb4d9">  128</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#ab8ba4c5120a26a07a84d0e2c418bb4d9">HFMLTriggerInterface::InitRun</a>(<a class="code" href="../../d5/dca/classPHCompositeNode.html">PHCompositeNode</a>* topNode)</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;{</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;  <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a3d41afd3cbf28e17bb4a4ad962f92b85">m_hitMap</a> = findNode::getClass&lt;SvtxHitMap&gt;(topNode, <span class="stringliteral">&quot;SvtxHitMap&quot;</span>);</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a3d41afd3cbf28e17bb4a4ad962f92b85">m_hitMap</a>)</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;  {</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;    std::cout &lt;&lt; <a class="code" href="../../d5/d6f/phool_8h.html#af0d012f6b6ca17becb91a4495f1e8b7a">PHWHERE</a> &lt;&lt; <span class="stringliteral">&quot;ERROR: Can&#39;t find node SvtxHitMap&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d1/d38/namespaceFun4AllReturnCodes.html#ada0752d5c8986cf16a6c49dab6ab0db7aa81fecdb2c3020530b329ddc0140bb0e">Fun4AllReturnCodes::ABORTRUN</a>;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;  }</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;  <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a7cde8a6ccd1db8c68cda72ab32b3e31f">m_Geoms</a> =</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;      findNode::getClass&lt;PHG4CylinderGeomContainer&gt;(topNode, <span class="stringliteral">&quot;CYLINDERGEOM_MAPS&quot;</span>);</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a7cde8a6ccd1db8c68cda72ab32b3e31f">m_Geoms</a>)</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;  {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;    std::cout &lt;&lt; <a class="code" href="../../d5/d6f/phool_8h.html#af0d012f6b6ca17becb91a4495f1e8b7a">PHWHERE</a> &lt;&lt; <span class="stringliteral">&quot;ERROR: Can&#39;t find node CYLINDERCELLGEOM_SVTX&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d1/d38/namespaceFun4AllReturnCodes.html#ada0752d5c8986cf16a6c49dab6ab0db7aa81fecdb2c3020530b329ddc0140bb0e">Fun4AllReturnCodes::ABORTRUN</a>;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;  }</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;  <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#af23aad77ee9773149f3f12f49535f3f8">m_truthInfo</a> = findNode::getClass&lt;PHG4TruthInfoContainer&gt;(topNode, <span class="stringliteral">&quot;G4TruthInfo&quot;</span>);</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#af23aad77ee9773149f3f12f49535f3f8">m_truthInfo</a>)</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;  {</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;    std::cout &lt;&lt; <a class="code" href="../../d5/d6f/phool_8h.html#af0d012f6b6ca17becb91a4495f1e8b7a">PHWHERE</a> &lt;&lt; <span class="stringliteral">&quot;ERROR: Can&#39;t find node G4TruthInfo&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d1/d38/namespaceFun4AllReturnCodes.html#ada0752d5c8986cf16a6c49dab6ab0db7aa81fecdb2c3020530b329ddc0140bb0e">Fun4AllReturnCodes::ABORTRUN</a>;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;  }</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;  <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#afb86daf890a0ab27c1e154d630c4ce0b">m_Flags</a> = findNode::getClass&lt;PdbParameterMap&gt;(topNode, <span class="stringliteral">&quot;HFMLTrigger_HepMCTriggerFlags&quot;</span>);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#afb86daf890a0ab27c1e154d630c4ce0b">m_Flags</a>)</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  {</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;    cout &lt;&lt; <span class="stringliteral">&quot;HFMLTriggerInterface::InitRun - WARNING - missing HFMLTrigger_HepMCTriggerFlags&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  }</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d1/d38/namespaceFun4AllReturnCodes.html#ada0752d5c8986cf16a6c49dab6ab0db7affeaf5c83d68b72a5c44f2660d44ab6b">Fun4AllReturnCodes::EVENT_OK</a>;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;}</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div>
<div class="line"><a name="l00160"></a><span class="lineno"><a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a29f338c2563a39e5d0e58b316f4b036f">  160</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a29f338c2563a39e5d0e58b316f4b036f">HFMLTriggerInterface::process_event</a>(<a class="code" href="../../d5/dca/classPHCompositeNode.html">PHCompositeNode</a>* topNode)</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;{</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <span class="keywordflow">if</span> (!<a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a9cb9e72eb1169323677f0d827bf30032">_svtxevalstack</a>)</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;  {</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a9cb9e72eb1169323677f0d827bf30032">_svtxevalstack</a> = <span class="keyword">new</span> <a class="code" href="../../d3/ded/classSvtxEvalStack.html">SvtxEvalStack</a>(topNode);</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;    <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a9cb9e72eb1169323677f0d827bf30032">_svtxevalstack</a>-&gt;<a class="code" href="../../d3/ded/classSvtxEvalStack.html#a84090996981db5cf3811063b59ceaf3f">set_strict</a>(0);</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a9cb9e72eb1169323677f0d827bf30032">_svtxevalstack</a>-&gt;<a class="code" href="../../d3/ded/classSvtxEvalStack.html#ab1e2bc7edc90246be2b357982a22e5c4">set_verbosity</a>(<a class="code" href="../../d5/dec/classFun4AllBase.html#a8a5c77a92bdac6bc043476e132379a40" title="Gets the verbosity of this module.">Verbosity</a>() + 1);</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="keywordflow">else</span></div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;  {</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;    <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a9cb9e72eb1169323677f0d827bf30032">_svtxevalstack</a>-&gt;<a class="code" href="../../d3/ded/classSvtxEvalStack.html#a8a929a1f521c9e8596ecb1ca108281cf">next_event</a>(topNode);</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;  }</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="comment">//  SvtxVertexEval* vertexeval = _svtxevalstack-&gt;get_vertex_eval();</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="comment">//  SvtxTrackEval* trackeval = _svtxevalstack-&gt;get_track_eval();</span></div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <a class="code" href="../../d1/d1e/classSvtxClusterEval.html">SvtxClusterEval</a>* clustereval = <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a9cb9e72eb1169323677f0d827bf30032">_svtxevalstack</a>-&gt;<a class="code" href="../../d3/ded/classSvtxEvalStack.html#a0b4d5492dbb3653dd35d99c427569a9f">get_cluster_eval</a>();</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <a class="code" href="../../d9/d62/classSvtxHitEval.html">SvtxHitEval</a>* hiteval = <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a9cb9e72eb1169323677f0d827bf30032">_svtxevalstack</a>-&gt;<a class="code" href="../../d3/ded/classSvtxEvalStack.html#a7b0818eebf0fca350e4809a09f445ed7">get_hit_eval</a>();</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="comment">//    SvtxTruthEval* trutheval = _svtxevalstack-&gt;get_truth_eval();</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  <a class="code" href="../../d5/d41/classPHHepMCGenEventMap.html" title="PHHepMCGenEventMap is collection of HEPMC events input into this simulation map of embedding ID -&gt; PH...">PHHepMCGenEventMap</a>* geneventmap = findNode::getClass&lt;PHHepMCGenEventMap&gt;(topNode, <span class="stringliteral">&quot;PHHepMCGenEventMap&quot;</span>);</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;  <span class="keywordflow">if</span> (!geneventmap)</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;  {</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    std::cout &lt;&lt; <a class="code" href="../../d5/d6f/phool_8h.html#af0d012f6b6ca17becb91a4495f1e8b7a">PHWHERE</a> &lt;&lt; <span class="stringliteral">&quot; - Fatal error - missing node PHHepMCGenEventMap&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d1/d38/namespaceFun4AllReturnCodes.html#ada0752d5c8986cf16a6c49dab6ab0db7aa81fecdb2c3020530b329ddc0140bb0e">Fun4AllReturnCodes::ABORTRUN</a>;</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  }</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <a class="code" href="../../d7/d7b/classPHHepMCGenEvent.html">PHHepMCGenEvent</a>* genevt = geneventmap-&gt;<a class="code" href="../../d5/d41/classPHHepMCGenEventMap.html#aeee51cbc5dbbd18af41e66c03e955319" title="fetch event">get</a>(<a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#af25354daaed2ac1142a08ef14975577e">_embedding_id</a>);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <span class="keywordflow">if</span> (!genevt)</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  {</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    std::cout &lt;&lt; <a class="code" href="../../d5/d6f/phool_8h.html#af0d012f6b6ca17becb91a4495f1e8b7a">PHWHERE</a> &lt;&lt; <span class="stringliteral">&quot; - Fatal error - node PHHepMCGenEventMap missing subevent with embedding ID &quot;</span> &lt;&lt; <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#af25354daaed2ac1142a08ef14975577e">_embedding_id</a>;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    std::cout &lt;&lt; <span class="stringliteral">&quot;. Print PHHepMCGenEventMap:&quot;</span>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    geneventmap-&gt;<a class="code" href="../../d5/d41/classPHHepMCGenEventMap.html#a9808332ce5629be39dc62c9c3d50a0e2">identify</a>();</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;    <span class="keywordflow">return</span> <a class="code" href="../../d1/d38/namespaceFun4AllReturnCodes.html#ada0752d5c8986cf16a6c49dab6ab0db7aa81fecdb2c3020530b329ddc0140bb0e">Fun4AllReturnCodes::ABORTRUN</a>;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;  }</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  HepMC::GenEvent* theEvent = genevt-&gt;<a class="code" href="../../d7/d7b/classPHHepMCGenEvent.html#a086a77104ec225e191885f9db7538521">getEvent</a>();</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <a class="code" href="../../df/df7/DrawTrackingEval_8C.html#a6f56363b38edbe2c8f3f447f891ee2c0">assert</a>(theEvent);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d5/dec/classFun4AllBase.html#a8a5c77a92bdac6bc043476e132379a40" title="Gets the verbosity of this module.">Verbosity</a>())</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  {</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    cout &lt;&lt; <span class="stringliteral">&quot;HFMLTriggerInterface::process_event - process HepMC::GenEvent with signal_process_id = &quot;</span></div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;         &lt;&lt; theEvent-&gt;signal_process_id();</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="keywordflow">if</span> (theEvent-&gt;signal_process_vertex())</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;    {</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;      cout &lt;&lt; <span class="stringliteral">&quot; and signal_process_vertex : &quot;</span>;</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;      theEvent-&gt;signal_process_vertex()-&gt;print();</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;    }</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    cout &lt;&lt; <span class="stringliteral">&quot;  - Event record:&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    theEvent-&gt;print();</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;  }</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;  <span class="comment">// property tree preparation</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;  <span class="comment">//  using boost::property_tree::ptree;</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;  <span class="comment">//  ptree pt;</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;  rapidjson::Document <a class="code" href="../../dc/d49/HelixHough__allButKappaRange__sse_8cpp.html#a891cb8c7054cada2d3d045543e5eea0e">d</a>;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;  d.SetObject();</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;  rapidjson::Document::AllocatorType&amp; alloc = d.GetAllocator();</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;</div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;  <span class="keyword">auto</span> loadCoordinate = [&amp;](<span class="keywordtype">double</span> <a class="code" href="../../d4/d51/vector__math__inline_8h.html#a9336ebf25087d91c818ee6e9ec29f8c1">x</a>, <span class="keywordtype">double</span> <a class="code" href="../../dc/d49/HelixHough__allButKappaRange__sse_8cpp.html#a52f568dc4071de9d9ca4dcc3a1405561">y</a>, <span class="keywordtype">double</span> <a class="code" href="../../dc/d49/HelixHough__allButKappaRange__sse_8cpp.html#a9593b8fc874ec60dacdcbeaec75a8235">z</a>) {</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;    <span class="comment">//    ptree vertexTree;</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    rapidjson::Value vertexTree(rapidjson::kArrayType);</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;    <span class="comment">//    ptree vertexX;</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <span class="comment">//    vertexX.put(&quot;&quot;, x);</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="comment">//    vertexTree.push_back(make_pair(&quot;&quot;, vertexX));</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="comment">//    ptree vertexY;</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="comment">//    vertexY.put(&quot;&quot;, y);</span></div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;    <span class="comment">//    vertexTree.push_back(make_pair(&quot;&quot;, vertexY));</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;    <span class="comment">//    ptree vertexZ;</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;    <span class="comment">//    vertexZ.put(&quot;&quot;, z);</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;    <span class="comment">//    vertexTree.push_back(make_pair(&quot;&quot;, vertexZ));</span></div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    vertexTree.PushBack(x, alloc).PushBack(y, alloc).PushBack(<a class="code" href="../../dc/d49/HelixHough__allButKappaRange__sse_8cpp.html#a9593b8fc874ec60dacdcbeaec75a8235">z</a>, alloc);</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="keywordflow">return</span> vertexTree;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;  };</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;  <span class="comment">// Create a root</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;  <span class="comment">//  ptree pTree;</span></div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;  <span class="comment">// meta data</span></div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;  <span class="comment">//  ptree metaTree;</span></div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  rapidjson::Value metaTree(rapidjson::kObjectType);</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  metaTree.AddMember(<span class="stringliteral">&quot;Description&quot;</span>, <span class="stringliteral">&quot;These are meta data for this event. Not intended to use in ML algorithm&quot;</span>, alloc);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  metaTree.AddMember(<span class="stringliteral">&quot;EventID&quot;</span>, <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a79d5048608160f7dc1e1634827508eb0">_ievent</a>, alloc);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  metaTree.AddMember(<span class="stringliteral">&quot;Unit&quot;</span>, <span class="stringliteral">&quot;cm&quot;</span>, alloc);</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;  metaTree.AddMember(<span class="stringliteral">&quot;CollisionVertex&quot;</span>,</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                     loadCoordinate(genevt-&gt;<a class="code" href="../../d7/d7b/classPHHepMCGenEvent.html#aeb1f4b1ca526d968a3b025a3063c61c4" title="collision vertex position in the Hall coordinate system, use PHENIX units of cm, ns">get_collision_vertex</a>().x(),</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                                    genevt-&gt;<a class="code" href="../../d7/d7b/classPHHepMCGenEvent.html#aeb1f4b1ca526d968a3b025a3063c61c4" title="collision vertex position in the Hall coordinate system, use PHENIX units of cm, ns">get_collision_vertex</a>().y(),</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                                    genevt-&gt;<a class="code" href="../../d7/d7b/classPHHepMCGenEvent.html#aeb1f4b1ca526d968a3b025a3063c61c4" title="collision vertex position in the Hall coordinate system, use PHENIX units of cm, ns">get_collision_vertex</a>().z()),</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                     alloc);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;  metaTree.AddMember(<span class="stringliteral">&quot;Layer_Count&quot;</span>, <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a071b28d841c1bc1b2a15e2cc325b30b5">_nlayers_maps</a>, alloc);</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;  metaTree.AddMember(<span class="stringliteral">&quot;PixelHalfLayerIndex_Count&quot;</span>, <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a071b28d841c1bc1b2a15e2cc325b30b5">_nlayers_maps</a> * 2, alloc);</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> layer = 0; layer &lt; <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a071b28d841c1bc1b2a15e2cc325b30b5">_nlayers_maps</a>; ++layer)</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;  {</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    PHG4CylinderGeom_MVTX* geom = <span class="keyword">dynamic_cast&lt;</span>PHG4CylinderGeom_MVTX*<span class="keyword">&gt;</span>(<a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a7cde8a6ccd1db8c68cda72ab32b3e31f">m_Geoms</a>-&gt;<a class="code" href="../../d4/de7/classPHG4CylinderGeomContainer.html#a08321019aaff5f57cd416b64d0f536bf">GetLayerGeom</a>(layer));</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <a class="code" href="../../df/df7/DrawTrackingEval_8C.html#a6f56363b38edbe2c8f3f447f891ee2c0">assert</a>(geom);</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;    <span class="comment">//    ptree layerDescTree;</span></div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;    rapidjson::Value layerDescTree(rapidjson::kObjectType);</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;    <span class="keyword">static</span> <span class="keyword">const</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nChip(9);</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;    layerDescTree.AddMember(<span class="stringliteral">&quot;PixelPhiIndexInLayer_Count&quot;</span>, geom-&gt;get_N_staves() * geom-&gt;get_NX(), alloc);</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    layerDescTree.AddMember(<span class="stringliteral">&quot;PixelPhiIndexInHalfLayer_Count&quot;</span>, geom-&gt;get_N_staves() * geom-&gt;get_NX() / 2, alloc);</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    layerDescTree.AddMember(<span class="stringliteral">&quot;PixelZIndex_Count&quot;</span>, nChip * geom-&gt;get_NZ(), alloc);</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    layerDescTree.AddMember(<span class="stringliteral">&quot;HalfLayer_Count&quot;</span>, 2, alloc);</div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;    layerDescTree.AddMember(<span class="stringliteral">&quot;Stave_Count&quot;</span>, geom-&gt;get_N_staves(), alloc);</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;    layerDescTree.AddMember(<span class="stringliteral">&quot;Chip_Count&quot;</span>, nChip, alloc);</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;    layerDescTree.AddMember(<span class="stringliteral">&quot;Pixel_Count&quot;</span>, geom-&gt;get_NX() * geom-&gt;get_NZ(), alloc);</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="comment">//    metaTree.AddMember(</span></div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="comment">//        str(boost::format{&quot;Layer%1%&quot;} % layer).c_str(),</span></div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;    <span class="comment">//        layerDescTree, alloc);</span></div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;    rapidjson::Value keyName(str(boost::format{<span class="stringliteral">&quot;Layer%1%&quot;</span>} % layer).c_str(), alloc);</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;    metaTree.AddMember(keyName,</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;                       layerDescTree, alloc);</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;  }</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="comment">//  ptree truthTriggerFlagTree;</span></div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  rapidjson::Value truthTriggerFlagTree(rapidjson::kObjectType);</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  truthTriggerFlagTree.AddMember(<span class="stringliteral">&quot;Description&quot;</span>,</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                                 <span class="stringliteral">&quot;These are categorical true/false MonteCalo truth tags for the event. These are only known in training sample. This would be trigger output in real data processing.&quot;</span>,</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                                 alloc);</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;  <span class="comment">//    truthTriggerFlagTree.AddMember(&quot;ExampleSignal1&quot;, true, alloc);</span></div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;  <span class="comment">//    truthTriggerFlagTree.AddMember(&quot;ExampleSignal2&quot;, false, alloc);</span></div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;  rapidjson::Value flagsTree(rapidjson::kObjectType);</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#afb86daf890a0ab27c1e154d630c4ce0b">m_Flags</a>)</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;  {</div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;    <span class="keyword">auto</span> range = <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#afb86daf890a0ab27c1e154d630c4ce0b">m_Flags</a>-&gt;<a class="code" href="../../d8/d21/classPdbParameterMap.html#ac348934f368cf69d37ce7480fdcd332c">get_iparam_iters</a>();</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> flagIter = range.first; flagIter != range.second; ++flagIter)</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;    {</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;<span class="comment">//      rapidjson::Value aFlag(rapidjson::kObjectType);</span></div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">string</span>&amp; <a class="code" href="../../d5/d3b/FillBlobHist_8C.html#aeaf846aa21a7d016a52f0b5b0c2f5544">name</a> = flagIter-&gt;first;</div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;      rapidjson::Value keyName(name.c_str(), alloc);</div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      <span class="keyword">const</span> <span class="keywordtype">bool</span> flag = flagIter-&gt;second &gt; 0 ? <span class="keyword">true</span> : <span class="keyword">false</span>;</div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;</div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;      flagsTree.AddMember(keyName, flag, alloc);</div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="comment">//      flagsTree.PushBack(aFlag, alloc);</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    }</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;  }</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;  truthTriggerFlagTree.AddMember(<span class="stringliteral">&quot;Flags&quot;</span>, flagsTree, alloc);</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;  <span class="comment">// Raw hits</span></div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;  <span class="comment">//  ptree rawHitTree;</span></div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;  rapidjson::Value rawHitTree(rapidjson::kObjectType);</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;  rawHitTree.AddMember(<span class="stringliteral">&quot;Description&quot;</span>,</div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                       <span class="stringliteral">&quot;Raw data in the event in an unordered set of hit ID. To help in visualization stage, the coordinate of the hit is also appended. These would be input in real data.&quot;</span>,</div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                       alloc);</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;  <span class="comment">//  rawHitTree.put(&quot;LayerRage&quot;, &quot;0-2&quot;);</span></div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="comment">//  ptree rawHitsTree;</span></div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  rapidjson::Value rawHitsTree(rapidjson::kArrayType);</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  set&lt;unsigned int&gt; mapsHits;  <span class="comment">//internal consistency check for later stages of truth tracks</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <a class="code" href="../../df/df7/DrawTrackingEval_8C.html#a6f56363b38edbe2c8f3f447f891ee2c0">assert</a>(<a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a3d41afd3cbf28e17bb4a4ad962f92b85">m_hitMap</a>);</div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../d4/de2/classSvtxHitMap.html#a949510b965fdb7488757914d7ebc0f21">SvtxHitMap::Iter</a> iter = <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a3d41afd3cbf28e17bb4a4ad962f92b85">m_hitMap</a>-&gt;<a class="code" href="../../d4/de2/classSvtxHitMap.html#a6439eedeca107a824b208c285f6fa8df">begin</a>();</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;       iter != <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a3d41afd3cbf28e17bb4a4ad962f92b85">m_hitMap</a>-&gt;<a class="code" href="../../d4/de2/classSvtxHitMap.html#a7a41c56238b0cd16c66ec99874da493a">end</a>();</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;       ++iter)</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;  {</div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;    <a class="code" href="../../da/df2/classSvtxHit.html">SvtxHit</a>* hit = iter-&gt;second;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;    <a class="code" href="../../df/df7/DrawTrackingEval_8C.html#a6f56363b38edbe2c8f3f447f891ee2c0">assert</a>(hit);</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> layer = hit-&gt;<a class="code" href="../../da/df2/classSvtxHit.html#adcad61fe28a698713917e7e721806587">get_layer</a>();</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;    <span class="keywordflow">if</span> (layer &lt; _nlayers_maps)</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    {</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> hitID = hit-&gt;<a class="code" href="../../da/df2/classSvtxHit.html#a8b64f7fe1e1fae887c9c4cf0ea47b39d">get_id</a>();</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;      mapsHits.insert(hitID);</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;      <a class="code" href="../../dc/dfe/classPHG4Cell.html">PHG4Cell</a>* cell = hiteval-&gt;get_cell(hit);</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;      <a class="code" href="../../df/df7/DrawTrackingEval_8C.html#a6f56363b38edbe2c8f3f447f891ee2c0">assert</a>(cell);</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;      PHG4CylinderGeom_MVTX* geom = <span class="keyword">dynamic_cast&lt;</span>PHG4CylinderGeom_MVTX*<span class="keyword">&gt;</span>(<a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a7cde8a6ccd1db8c68cda72ab32b3e31f">m_Geoms</a>-&gt;<a class="code" href="../../d4/de7/classPHG4CylinderGeomContainer.html#a08321019aaff5f57cd416b64d0f536bf">GetLayerGeom</a>(layer));</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;      <a class="code" href="../../df/df7/DrawTrackingEval_8C.html#a6f56363b38edbe2c8f3f447f891ee2c0">assert</a>(geom);</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;      TVector3 local_coords = geom-&gt;get_local_coords_from_pixel(cell-&gt;<a class="code" href="../../dc/dfe/classPHG4Cell.html#a2340069f645f0deed26e08608d97bf62">get_pixel_index</a>());</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      TVector3 world_coords = geom-&gt;get_world_from_local_coords(cell-&gt;<a class="code" href="../../dc/dfe/classPHG4Cell.html#a131b9ff944ee8b97244f340fa9bbdaca">get_stave_index</a>(), cell-&gt;<a class="code" href="../../dc/dfe/classPHG4Cell.html#a2d936edb31dc8754a8206f0a814f8ec0">get_half_stave_index</a>(), cell-&gt;<a class="code" href="../../dc/dfe/classPHG4Cell.html#ac78be4a2f4af1144dee0caccb0c46b84">get_module_index</a>(), cell-&gt;<a class="code" href="../../dc/dfe/classPHG4Cell.html#a006475544913770d990530778c85e709">get_chip_index</a>(), local_coords);</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pixel_x(cell-&gt;<a class="code" href="../../dc/dfe/classPHG4Cell.html#a2340069f645f0deed26e08608d97bf62">get_pixel_index</a>() % geom-&gt;get_NX());</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pixel_z(cell-&gt;<a class="code" href="../../dc/dfe/classPHG4Cell.html#a2340069f645f0deed26e08608d97bf62">get_pixel_index</a>() / geom-&gt;get_NX());</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> halflayer = (int) pixel_x &gt;= geom-&gt;get_NX() / 2 ? 0 : 1;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;      <a class="code" href="../../df/df7/DrawTrackingEval_8C.html#a6f56363b38edbe2c8f3f447f891ee2c0">assert</a>((<span class="keywordtype">int</span>) pixel_x &lt; geom-&gt;get_NX());</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;      <a class="code" href="../../df/df7/DrawTrackingEval_8C.html#a6f56363b38edbe2c8f3f447f891ee2c0">assert</a>((<span class="keywordtype">int</span>) pixel_z &lt; geom-&gt;get_NZ());</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> halfLayerIndex(layer * 2 + halflayer);</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pixelPhiIndex(</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;          cell-&gt;<a class="code" href="../../dc/dfe/classPHG4Cell.html#a131b9ff944ee8b97244f340fa9bbdaca">get_stave_index</a>() * geom-&gt;get_NX() + pixel_x);</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pixelPhiIndexHL(</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;          cell-&gt;<a class="code" href="../../dc/dfe/classPHG4Cell.html#a131b9ff944ee8b97244f340fa9bbdaca">get_stave_index</a>() * geom-&gt;get_NX() / 2 + pixel_x % (geom-&gt;get_NX() / 2));</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> pixelZIndex(cell-&gt;<a class="code" href="../../dc/dfe/classPHG4Cell.html#a006475544913770d990530778c85e709">get_chip_index</a>() * geom-&gt;get_NZ() + pixel_z);</div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;      <span class="comment">//      ptree hitTree;</span></div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;      rapidjson::Value hitTree(rapidjson::kObjectType);</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;      <span class="comment">//      ptree hitIDTree;</span></div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;      rapidjson::Value hitIDTree(rapidjson::kObjectType);</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;      hitIDTree.AddMember(<span class="stringliteral">&quot;HitSequenceInEvent&quot;</span>, hitID, alloc);</div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;</div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;      hitIDTree.AddMember(<span class="stringliteral">&quot;PixelHalfLayerIndex&quot;</span>, halfLayerIndex, alloc);</div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;      hitIDTree.AddMember(<span class="stringliteral">&quot;PixelPhiIndexInLayer&quot;</span>, pixelPhiIndex, alloc);</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;      hitIDTree.AddMember(<span class="stringliteral">&quot;PixelPhiIndexInHalfLayer&quot;</span>, pixelPhiIndexHL, alloc);</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;      hitIDTree.AddMember(<span class="stringliteral">&quot;PixelZIndex&quot;</span>, pixelZIndex, alloc);</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;      hitIDTree.AddMember(<span class="stringliteral">&quot;Layer&quot;</span>, layer, alloc);</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;      hitIDTree.AddMember(<span class="stringliteral">&quot;HalfLayer&quot;</span>, halflayer, alloc);</div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;      hitIDTree.AddMember(<span class="stringliteral">&quot;Stave&quot;</span>, cell-&gt;<a class="code" href="../../dc/dfe/classPHG4Cell.html#a131b9ff944ee8b97244f340fa9bbdaca">get_stave_index</a>(), alloc);</div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;      <span class="comment">//      hitIDTree.put(&quot;HalfStave&quot;, cell-&gt;get_half_stave_index());</span></div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      <span class="comment">//      hitIDTree.put(&quot;Module&quot;, cell-&gt;get_module_index());</span></div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;      hitIDTree.AddMember(<span class="stringliteral">&quot;Chip&quot;</span>, cell-&gt;<a class="code" href="../../dc/dfe/classPHG4Cell.html#a006475544913770d990530778c85e709">get_chip_index</a>(), alloc);</div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;      hitIDTree.AddMember(<span class="stringliteral">&quot;Pixel&quot;</span>, cell-&gt;<a class="code" href="../../dc/dfe/classPHG4Cell.html#a2340069f645f0deed26e08608d97bf62">get_pixel_index</a>(), alloc);</div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;      hitTree.AddMember(<span class="stringliteral">&quot;ID&quot;</span>, hitIDTree, alloc);</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;      hitTree.AddMember(<span class="stringliteral">&quot;Coordinate&quot;</span>,</div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                        loadCoordinate(world_coords.x(),</div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                                       world_coords.y(),</div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                                       world_coords.z()),</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                        alloc);</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;</div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;      <span class="comment">//      rawHitsTree.add_child(&quot;MVTXHit&quot;, hitTree);</span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;      rawHitsTree.PushBack(hitTree, alloc);</div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;</div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;      <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a14cfc4b19e44abb5f98fc464de6cd36b">m_hitStaveLayer</a>-&gt;Fill(cell-&gt;<a class="code" href="../../dc/dfe/classPHG4Cell.html#a131b9ff944ee8b97244f340fa9bbdaca">get_stave_index</a>(), halfLayerIndex);</div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;      <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#af287790982ce85699d24f6f77ee69631">m_hitModuleHalfStave</a>-&gt;Fill(cell-&gt;<a class="code" href="../../dc/dfe/classPHG4Cell.html#ac78be4a2f4af1144dee0caccb0c46b84">get_module_index</a>(), cell-&gt;<a class="code" href="../../dc/dfe/classPHG4Cell.html#a2d936edb31dc8754a8206f0a814f8ec0">get_half_stave_index</a>());</div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;      <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a1bc93cadf5d74ef6b04d13db4ff065ab">m_hitChipModule</a>-&gt;Fill(cell-&gt;<a class="code" href="../../dc/dfe/classPHG4Cell.html#a006475544913770d990530778c85e709">get_chip_index</a>(), cell-&gt;<a class="code" href="../../dc/dfe/classPHG4Cell.html#ac78be4a2f4af1144dee0caccb0c46b84">get_module_index</a>());</div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;</div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;      <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a3463a7fb4e302eb7504cf2d6aa121a27">m_hitLayerMap</a>-&gt;Fill(world_coords.x(), world_coords.y(), halfLayerIndex);</div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;      <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#ac5e615b74c6c2c95d72f941b1b62a7f0">m_hitPixelPhiMap</a>-&gt;Fill(pixelPhiIndex, atan2(world_coords.y(), world_coords.x()), halfLayerIndex);</div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;      <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a39d952af04de5a038e68a79533f6f5e9">m_hitPixelPhiMapHL</a>-&gt;Fill(pixelPhiIndexHL, atan2(world_coords.y(), world_coords.x()), halfLayerIndex);</div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;      <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a5e22b6b8b630b9cde989fdc26a0ae9e2">m_hitPixelZMap</a>-&gt;Fill(pixelZIndex, world_coords.z(), halfLayerIndex);</div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;    }  <span class="comment">//    if (layer &lt; _nlayers_maps)</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;  }  <span class="comment">//   for (SvtxHitMap::Iter iter = m_hitMap-&gt;begin();</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;  rawHitTree.AddMember(<span class="stringliteral">&quot;MVTXHits&quot;</span>, rawHitsTree, alloc);</div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;  <span class="comment">// Truth hits</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;  <span class="comment">//  ptree truthHitTree;</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;  rapidjson::Value truthHitTree(rapidjson::kObjectType);</div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;  truthHitTree.AddMember(<span class="stringliteral">&quot;Description&quot;</span>, <span class="stringliteral">&quot;From the MonteCalo truth information, pairs of track ID and subset of RawHit that belong to the track. These are not presented in real data. The track ID is arbitary.&quot;</span>,</div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;                         alloc);</div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;</div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;  <a class="code" href="../../df/df7/DrawTrackingEval_8C.html#a6f56363b38edbe2c8f3f447f891ee2c0">assert</a>(<a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#af23aad77ee9773149f3f12f49535f3f8">m_truthInfo</a>);</div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;  <span class="comment">//  ptree truthTracksTree;</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;  rapidjson::Value truthTracksTree(rapidjson::kArrayType);</div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;  <a class="code" href="../../da/d6c/classPHG4TruthInfoContainer.html#a450bb632b31da320f43b14dae6eb9bdb">PHG4TruthInfoContainer::ConstRange</a> range = <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#af23aad77ee9773149f3f12f49535f3f8">m_truthInfo</a>-&gt;<a class="code" href="../../da/d6c/classPHG4TruthInfoContainer.html#a2817b4438bb80cacb28f457975342cf2">GetPrimaryParticleRange</a>();</div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;  <span class="keywordflow">for</span> (<a class="code" href="../../da/d6c/classPHG4TruthInfoContainer.html#a7e41b92337311d1e82a087e9c3c8e7bd">PHG4TruthInfoContainer::ConstIterator</a> iter = range.first;</div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;       iter != range.second;</div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;       ++iter)</div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;  {</div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;    <a class="code" href="../../de/dc9/classPHG4Particle.html">PHG4Particle</a>* g4particle = iter-&gt;second;</div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;    <a class="code" href="../../df/df7/DrawTrackingEval_8C.html#a6f56363b38edbe2c8f3f447f891ee2c0">assert</a>(g4particle);</div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;</div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;    std::set&lt;SvtxCluster*&gt; g4clusters = clustereval-&gt;<a class="code" href="../../d1/d1e/classSvtxClusterEval.html#a084923c9a81dba1d830b390970ac3c8d">all_clusters_from</a>(g4particle);</div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;</div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;    <span class="comment">//    ptree trackHitTree;</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;    rapidjson::Value trackHitTree(rapidjson::kArrayType);</div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> nMAPS(0);</div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;</div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="../../df/d0b/classSvtxCluster.html">SvtxCluster</a>* cluster : g4clusters)</div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;    {</div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;      <a class="code" href="../../df/df7/DrawTrackingEval_8C.html#a6f56363b38edbe2c8f3f447f891ee2c0">assert</a>(cluster);</div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;      <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> layer = cluster-&gt;get_layer();</div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;      <span class="keywordflow">if</span> (layer &lt; _nlayers_maps)</div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;      {</div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;        ++nMAPS;</div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;</div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;        <span class="keywordflow">for</span> (<a class="code" href="../../df/d0b/classSvtxCluster.html#acff6c66f8a6f1210421745b64de8be93">SvtxCluster::ConstHitIter</a> hiter = cluster-&gt;begin_hits();</div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;             hiter != cluster-&gt;end_hits();</div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;             ++hiter)</div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;        {</div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;          <span class="comment">//        SvtxHit* hit = _hitmap-&gt;get(*hiter);</span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;          <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> hitID = *hiter;</div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;          <a class="code" href="../../df/df7/DrawTrackingEval_8C.html#a6f56363b38edbe2c8f3f447f891ee2c0">assert</a>(mapsHits.find(hitID) != mapsHits.end());</div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;</div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;          <span class="comment">//          ptree hitIDTree;</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;          <span class="comment">//          hitIDTree.put(&quot;&quot;, hitID);</span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;          trackHitTree.PushBack(hitID, alloc);</div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;        }</div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;      }</div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;    }  <span class="comment">//    for (const SvtxCluster* cluster : g4clusters)</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;</div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;    <span class="keywordflow">if</span> (nMAPS &gt; 1)</div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;    {</div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;      <span class="comment">//      ptree trackTree;</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;      rapidjson::Value trackTree(rapidjson::kObjectType);</div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;      trackTree.AddMember(<span class="stringliteral">&quot;TrackSequenceInEvent&quot;</span>, g4particle-&gt;<a class="code" href="../../de/dc9/classPHG4Particle.html#ac29b72a8cdeebc0754b6dd42b0cfab86">get_track_id</a>(), alloc);</div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;      trackTree.AddMember(<span class="stringliteral">&quot;HitSequenceInEvent&quot;</span>, trackHitTree, alloc);</div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;      trackTree.AddMember(<span class="stringliteral">&quot;ParticleTypeID&quot;</span>, g4particle-&gt;<a class="code" href="../../de/dc9/classPHG4Particle.html#a474033dbd058eea155c71fc4d17aaf4d">get_pid</a>(), alloc);</div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;      trackTree.AddMember(<span class="stringliteral">&quot;TrackMomentum&quot;</span>,</div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                          loadCoordinate(g4particle-&gt;<a class="code" href="../../de/dc9/classPHG4Particle.html#a44b98bfd72a04825791d1e4c4cb150a1">get_px</a>(),</div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                                         g4particle-&gt;<a class="code" href="../../de/dc9/classPHG4Particle.html#a3df4379f9e46224a8cca7f86c11e99e5">get_py</a>(),</div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                                         g4particle-&gt;<a class="code" href="../../de/dc9/classPHG4Particle.html#a533e9bda40b15f62802b187e6a743e74">get_pz</a>()),</div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;                          alloc);</div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;      <span class="comment">//      trackTree.put(&quot;TrackDCA3DXY&quot;, track-&gt;get_dca3d_xy());</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;      <span class="comment">//      trackTree.put(&quot;TrackDCA3DZ&quot;, track-&gt;get_dca3d_z());</span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;      <span class="comment">//      trackTree.add_child(&quot;TruthHit&quot;, trackHitTree);</span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;</div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;      <span class="comment">//      truthTracksTree.add_child(&quot;TruthTrack&quot;, trackTree);</span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;      truthTracksTree.PushBack(trackTree, alloc);</div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;    }  <span class="comment">//      if (nMAPS &gt; 1)</span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;</div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;  }  <span class="comment">//  for (PHG4TruthInfoContainer::ConstIterator iter = range.first;</span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;  truthHitTree.AddMember(<span class="stringliteral">&quot;TruthTracks&quot;</span>, truthTracksTree, alloc);</div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;</div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;  <span class="comment">//output</span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;  d.AddMember(<span class="stringliteral">&quot;MetaData&quot;</span>, metaTree, alloc);</div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;  d.AddMember(<span class="stringliteral">&quot;TruthTriggerFlag&quot;</span>, truthTriggerFlagTree, alloc);</div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;  d.AddMember(<span class="stringliteral">&quot;RawHit&quot;</span>, rawHitTree, alloc);</div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;  d.AddMember(<span class="stringliteral">&quot;TruthHit&quot;</span>, truthHitTree, alloc);</div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;</div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;  <a class="code" href="../../df/df7/DrawTrackingEval_8C.html#a6f56363b38edbe2c8f3f447f891ee2c0">assert</a>(<a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a999cdc49b3d672f5b3d973701472d509">m_jsonOut</a>.is_open());</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a79d5048608160f7dc1e1634827508eb0">_ievent</a> &gt; 0)</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;  {</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;    <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a999cdc49b3d672f5b3d973701472d509">m_jsonOut</a> &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;  }</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;  <span class="comment">//  write_json(m_jsonOut, pTree);</span></div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;  <span class="comment">//  write_xml(m_jsonOut, jsonTree);</span></div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;  <span class="comment">//  d.AddMember(&quot;Test&quot;, 1, d.GetAllocator());</span></div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;  rapidjson::OStreamWrapper osw(<a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a999cdc49b3d672f5b3d973701472d509">m_jsonOut</a>);</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;  rapidjson::PrettyWriter&lt;rapidjson::OStreamWrapper&gt; writer(osw);</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;  d.Accept(writer);</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;  ++<a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a79d5048608160f7dc1e1634827508eb0">_ievent</a>;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;</div>
<div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d1/d38/namespaceFun4AllReturnCodes.html#ada0752d5c8986cf16a6c49dab6ab0db7affeaf5c83d68b72a5c44f2660d44ab6b">Fun4AllReturnCodes::EVENT_OK</a>;</div>
<div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;}</div>
<div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;</div>
<div class="line"><a name="l00504"></a><span class="lineno"><a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a20669c27f0b84454b15a94990dda2062">  504</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a20669c27f0b84454b15a94990dda2062" title="Called at the end of all processing.">HFMLTriggerInterface::End</a>(<a class="code" href="../../d5/dca/classPHCompositeNode.html">PHCompositeNode</a>* topNode)</div>
<div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;{</div>
<div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a5ae109e696472b24e63fec0a7cc66f41">_f</a>)</div>
<div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;  {</div>
<div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;    <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a5ae109e696472b24e63fec0a7cc66f41">_f</a>-&gt;cd();</div>
<div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;    <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a5ae109e696472b24e63fec0a7cc66f41">_f</a>-&gt;Write();</div>
<div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;    <span class="comment">//_f-&gt;Close();</span></div>
<div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;</div>
<div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;    <span class="comment">//    m_hitLayerMap-&gt;Write();</span></div>
<div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;  }</div>
<div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;</div>
<div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a999cdc49b3d672f5b3d973701472d509">m_jsonOut</a>.is_open())</div>
<div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;  {</div>
<div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;    <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a999cdc49b3d672f5b3d973701472d509">m_jsonOut</a> &lt;&lt; <span class="stringliteral">&quot;]&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;    <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a999cdc49b3d672f5b3d973701472d509">m_jsonOut</a> &lt;&lt; <span class="stringliteral">&quot;}&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;</div>
<div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;    <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a999cdc49b3d672f5b3d973701472d509">m_jsonOut</a>.close();</div>
<div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;  }</div>
<div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;</div>
<div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;  cout &lt;&lt; <span class="stringliteral">&quot;HFMLTriggerInterface::End - output to &quot;</span> &lt;&lt; <a class="code" href="../../d7/d62/classHFMLTriggerInterface.html#a3c69a07c77f9fe7caa967b98c79b8701">_foutname</a> &lt;&lt; <span class="stringliteral">&quot;.*&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div>
<div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;  <span class="keywordflow">return</span> <a class="code" href="../../d1/d38/namespaceFun4AllReturnCodes.html#ada0752d5c8986cf16a6c49dab6ab0db7affeaf5c83d68b72a5c44f2660d44ab6b">Fun4AllReturnCodes::EVENT_OK</a>;</div>
<div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->

<!-- start footer part -->
<div id="nav-path" class="navpath">
	<!-- id is needed for treeview function! -->
	<ul>
		<li class="navelem"><a class="el" href="../../dir_28bcbade87c4f5514eba3ebdb3ef6c2b.html">analysis</a></li><li class="navelem"><a class="el" href="../../dir_885886758eef84187a73b1026ad14195.html">blob</a></li><li class="navelem"><a class="el" href="../../dir_25710a8c0a1c81be6fa969c948f341ac.html">master</a></li><li class="navelem"><a class="el" href="../../dir_3960358290b25100780bba0b0e7e61b7.html">HF-Jet</a></li><li class="navelem"><a class="el" href="../../dir_d57d02188624a8b87e057b9ed7965f4e.html">HFMLTrigger</a></li><li class="navelem"><a class="el" href="../../d5/dff/HFMLTriggerInterface_8C.html">HFMLTriggerInterface.C</a></li>
		<li class="footer">
		Built by <a href="mailto:jhuang@bnl.gov">Jin Huang</a></em>.
			updated: <em>Mon Feb 17 2020 04:18:10</em> using <a
			href="http://www.doxygen.org/index.html"> <img class="footer"
				src="../../doxygen.png" alt="doxygen" /></a> 1.8.2 
				with <a href="https://github.com/sPHENIX-Collaboration">sPHENIX GitHub integration</a>
		</li>
	</ul>
</div>
</body>
</html>
