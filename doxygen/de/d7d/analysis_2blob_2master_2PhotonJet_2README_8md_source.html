<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=9" />
<title>Analysis Software: analysis/blob/master/PhotonJet/README.md Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script> <link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script> 
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
	<div id="top">
		<!-- do not remove this div, it is closed by doxygen! -->
		<div id="titlearea">
			<table cellspacing="0" cellpadding="0">
				<tbody>
					<tr style="height: 56px;">
						<td id="projectlogo"><a href="https://wiki.bnl.gov/sPHENIX/index.php/Main_Page"><img
								alt="Logo" src="../../sphenix.png" /></a></td>
						<td style="padding-left: 0.5em;">
							<div id="projectname">
								Analysis Software
							</div> 
							<div id="projectbrief">
								Documentation for <a href="https://wiki.bnl.gov/sPHENIX/index.php/Main_Page">sPHENIX</a> simulation software
							</div> 
						</td>
					</tr>
				</tbody>
			</table>
		</div>
		<!-- end header part -->
<!-- Generated by Doxygen 1.8.2 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Home&#160;page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../usergroup0.html"><span>External&#160;Links</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="../../search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('de/d7d/analysis_2blob_2master_2PhotonJet_2README_8md.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Groups</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(12)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">analysis/blob/master/PhotonJet/README.md</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../de/d7d/analysis_2blob_2master_2PhotonJet_2README_8md.html">Go to the documentation of this file.</a> Or view <a target="top" href="https://github.com/sPHENIX-Collaboration//analysis/blob/master/PhotonJet/README.md">the newest version in sPHENIX GitHub for file README.md</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="preprocessor">## Basic intro and how to get started</span></div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;This analysis <span class="keyword">package </span>is designed to be run over with the main sPHENIX G4 macro, Fun4All_G4_sPHENIX.C. When written, it was made to be run over dedicated PYTHIA direct photon-jet events that were output into HEPMC format, although in principle any input that works with Fun4All_G4_sPHENIX.C should work. The standard &quot;generic&quot; PYTHIA triggers can be used to generate events, i.e. the PHPy8ParticleTrigger set to find photons and the PHPy8JetTrigger set to find jets of your choosing.</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;In order to run the macro and include the PhotonJet analysis package, the following steps should be taken:</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;1. Execute the usual `autogen.sh` and `make install` building of the PhotonJet package, per the usual sPHENIX way.</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;2. Include the following lines of code in the Fun4All_G4_sPHENIX.C macro:</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;```</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;  gSystem-&gt;Load(&quot;libPhotonJet.so&quot;);</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;  <a class="code" href="../../dc/d65/classPhotonJet.html">PhotonJet</a> * photjet = <span class="keyword">new</span> <a class="code" href="../../dc/d65/classPhotonJet.html">PhotonJet</a>(<span class="stringliteral">&quot;outputfilename.root&quot;</span>);</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;  se-&gt;registerSubsystem(photjet);</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;```</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;where se is the <a class="code" href="../../da/d29/classFun4AllServer.html">Fun4AllServer</a> instantiated at the beginning <a class="code" href="../../da/dae/odd__filter_8cc.html#a0cd389fe355cbd2d03f3c2916c9eefe9">of</a> the macro.</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;The output is then <span class="stringliteral">&quot;outputfilename.root&quot;</span> and contains several trees which have the relevant information. The <a class="code" href="../../d7/d2d/make__fmod__calibrations_8C.html#abc721ee15074057ff5837b1d5dac8ae2">tree</a> <a class="code" href="../../d4/d89/namespaceTauVsDIS__MachineLearning__Differentiation.html#ac4e7577f36b8f56bd3aca39af935a048">names</a> should be reasonably <span class="keyword">self</span> explanatory. Note that truth information <span class="keywordflow">for</span> the photon-jet correlated pairs is located directly <a class="code" href="../../dd/da0/IsInCurvedRich_8m.html#a64b0840001d30ff8cd416759a03542ce">in</a> that <a class="code" href="../../d7/d2d/make__fmod__calibrations_8C.html#abc721ee15074057ff5837b1d5dac8ae2">tree</a>, <a class="code" href="../../d7/d87/fasthadv4_8C.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>.e. <a class="code" href="../../dd/da0/IsInCurvedRich_8m.html#a64b0840001d30ff8cd416759a03542ce">in</a> the <a class="code" href="../../d7/d2d/make__fmod__calibrations_8C.html#abc721ee15074057ff5837b1d5dac8ae2">tree</a> <span class="stringliteral">&quot;isophoton-jets&quot;</span> the truth jet pt <span class="keywordflow">for</span> <a class="code" href="../../d7/da4/namespaceKFPMath.html#a6d2496198d1982fd950acfb79033902b">a</a> given <a class="code" href="../../dc/df6/200pp__pythia8__CTEQ6L__7GeV__ALL_8cfg__eneg__DSTReader_8root__Draw__HFJetTruth__CrossSection2RAA_8C.html#a7b89b4915906de1ad87dc1a92067d400">entry</a> is _truthjetpt and the reconstructed jet pt is _recojetpt.</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;Of course <a class="code" href="../../d4/d51/vector__math__inline_8h.html#af7aa8ef24c06694b05f6d88e27d401a2">one</a> can add whatever they would like to the <a class="code" href="../../da/de5/ThicknessScan_8m.html#a40a5d58ffa6e88aa578d6683ac413105">file</a> <a class="code" href="../../dc/d65/classPhotonJet.html">PhotonJet</a>.C to add leaves to these trees or any other thing they see <a class="code" href="../../d7/d2d/make__fmod__calibrations_8C.html#a0dac611a7318ae96902d033b4b7b51f1">fit</a>. Happy photon-jetting!</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">## More detailed things (will continue adding as code develops)</span></div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;There are <a class="code" href="../../d7/da4/namespaceKFPMath.html#a6d2496198d1982fd950acfb79033902b">a</a> few <span class="keyword">public</span> functions that <a class="code" href="../../d4/d51/vector__math__inline_8h.html#af7aa8ef24c06694b05f6d88e27d401a2">one</a> can <span class="keyword">set</span> automatically, <span class="keywordflow">for</span> example the minimum photon pT cut or the isolation cone size. </div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;The isolation cone <a class="code" href="../../d0/d73/flowAfterburner_8cc.html#a64c05a822b967b6f10997955f2cb6171">algorithm</a> is by <span class="keywordflow">default</span> used; <a class="code" href="../../d4/d51/vector__math__inline_8h.html#af7aa8ef24c06694b05f6d88e27d401a2">one</a> can change <span class="keyword">this</span> with the <span class="keyword">function</span> use_isocone_algorithm. The isolation <a class="code" href="../../d0/d73/flowAfterburner_8cc.html#a64c05a822b967b6f10997955f2cb6171">algorithm</a> details are <a class="code" href="../../dd/da0/IsInCurvedRich_8m.html#a64b0840001d30ff8cd416759a03542ce">in</a> the code, but <a class="code" href="../../d5/d0b/changehitformat_8cc.html#a592a0cf34c13b7b53e37c2791a6a982e">it</a> currently checks <span class="keywordflow">for</span> reconstructed <a class="code" href="../../d0/d34/tracks_8C.html#ac926d763061c5568ecb5f5e062e9c778">tracks</a> and clusters within <a class="code" href="../../d7/da4/namespaceKFPMath.html#a6d2496198d1982fd950acfb79033902b">a</a> cone size radius <span class="keyword">set</span> by the user greater than 200 <a class="code" href="../../dc/d5a/namespacegenfit_1_1Unit.html#a59f55222dbc380a6ecc7ff5a05355d49">MeV</a> <a class="code" href="../../dd/da0/IsInCurvedRich_8m.html#a64b0840001d30ff8cd416759a03542ce">in</a> pT. One can also change the cone size used <span class="keywordflow">for</span> the jets. The <span class="keywordflow">default</span> size is R=0.3, and the DSTnodes can accomodate R=0.2 to R=0.8 <a class="code" href="../../dd/da0/IsInCurvedRich_8m.html#a64b0840001d30ff8cd416759a03542ce">in</a> increments <a class="code" href="../../da/dae/odd__filter_8cc.html#a0cd389fe355cbd2d03f3c2916c9eefe9">of</a> 0.1.</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;There are <a class="code" href="../../dc/d49/HelixHough__allButKappaRange__sse_8cpp.html#ae5cb56e51f62dbfa208ee62f57d6ce5a">two</a> different truth trees; <a class="code" href="../../d4/d51/vector__math__inline_8h.html#af7aa8ef24c06694b05f6d88e27d401a2">one</a> is produced with the node <span class="stringliteral">&quot;PHG4TruthInfoContainer&quot;</span> and the other is from the raw HEPMC files, <a class="code" href="../../d7/d87/fasthadv4_8C.html#a6f6ccfcf58b31cb6412107d9d5281426">i</a>.e. the <a class="code" href="../../d7/d2d/make__fmod__calibrations_8C.html#abc721ee15074057ff5837b1d5dac8ae2">tree</a> <span class="stringliteral">&quot;truthtree&quot;</span> contains all <a class="code" href="../../da/dae/odd__filter_8cc.html#a0cd389fe355cbd2d03f3c2916c9eefe9">of</a> the PYTHIA output which includes <a class="code" href="../../db/d20/parton_8f.html#aa0edf2e3bc4c9634a0c0e2ee25615ad2">parton</a> info <span class="keywordflow">while</span> the <span class="stringliteral">&quot;truth_g4particles&quot;</span> is <a class="code" href="../../d7/da4/namespaceKFPMath.html#a6d2496198d1982fd950acfb79033902b">a</a> more condensed truth <a class="code" href="../../d7/d2d/make__fmod__calibrations_8C.html#abc721ee15074057ff5837b1d5dac8ae2">tree</a> without the <a class="code" href="../../db/d20/parton_8f.html#aa0edf2e3bc4c9634a0c0e2ee25615ad2">parton</a> information.</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;Additional functionality has been added to look at forward jets. Tracked jet capabilities were added as well; <a class="code" href="../../d4/d51/vector__math__inline_8h.html#af7aa8ef24c06694b05f6d88e27d401a2">one</a> can <span class="keyword">set</span> the use <a class="code" href="../../da/dae/odd__filter_8cc.html#a0cd389fe355cbd2d03f3c2916c9eefe9">of</a> these <a class="code" href="../../dd/da0/IsInCurvedRich_8m.html#a64b0840001d30ff8cd416759a03542ce">in</a> their macro. </div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;One can additionally choose to use or not use the <a class="code" href="../../dc/d59/Proto4ShowerCalibFit_8m.html#a7130b1618285588513fd1ff97884b9d9">position</a> correction <a class="code" href="../../dd/da0/IsInCurvedRich_8m.html#a64b0840001d30ff8cd416759a03542ce">in</a> the <a class="code" href="../../da/d58/namespaceRawTowerDefs.html#a9830976a057bd25053b5557779fd1d5da9234faec334cf15fe31a335f044e9a53">CEMC</a> via the flag use_positioncorrection_CEMC. For pure photon measurements <span class="keyword">this</span> should be used as <a class="code" href="../../d5/d0b/changehitformat_8cc.html#a592a0cf34c13b7b53e37c2791a6a982e">it</a> improves the resolution <a class="code" href="../../da/d55/TPCRateLayered_8m.html#a58ab1fd68e97078232808206b850161b">on</a> the constant <a class="code" href="../../dc/d43/Proto2ShowerCalibFit_8m.html#ac002779c383d2cc783e881f94449de66">energy</a> term <a class="code" href="../../da/dae/odd__filter_8cc.html#a0cd389fe355cbd2d03f3c2916c9eefe9">of</a> the photon by 1-2%</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">## Addition of HIJING embedding capabilities</span></div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor"></span>In order to produce photon-jets <a class="code" href="../../dd/da0/IsInCurvedRich_8m.html#a64b0840001d30ff8cd416759a03542ce">in</a> heavy ion background environments, PYTHIA events can be embedded into <a class="code" href="../../df/d32/Hijing_8cxx.html#a1efb7f6f338117e67e62d5dd04bb7ce6">HIJING</a> hits files. The code has been updated to include these capabilities; notably the flag <span class="stringliteral">&quot;set_AA_collisions&quot;</span> must be <span class="keyword">set</span> to 1 <a class="code" href="../../dd/da0/IsInCurvedRich_8m.html#a64b0840001d30ff8cd416759a03542ce">in</a> order to grab the correct nodes from the node <a class="code" href="../../d7/d2d/make__fmod__calibrations_8C.html#abc721ee15074057ff5837b1d5dac8ae2">tree</a>. This is because the jets undergo <a class="code" href="../../d7/da4/namespaceKFPMath.html#a6d2496198d1982fd950acfb79033902b">a</a> background subtraction method, and <span class="keyword">this</span> is put onto <a class="code" href="../../d7/da4/namespaceKFPMath.html#a6d2496198d1982fd950acfb79033902b">a</a> different node. If you want regular pp capabilities, then just <span class="keyword">set</span> <span class="keyword">this</span> flag to 0 and <a class="code" href="../../d5/d0b/changehitformat_8cc.html#a592a0cf34c13b7b53e37c2791a6a982e">it</a> will <span class="keyword">get</span> the usual <a class="code" href="../../d6/d91/classtower.html">tower</a>-jet nodes.</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;## Additional code packages</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;There are <a class="code" href="../../dc/d49/HelixHough__allButKappaRange__sse_8cpp.html#ae5cb56e51f62dbfa208ee62f57d6ce5a">two</a> additional code packages, <a class="code" href="../../dc/d53/classPhotons.html">Photons</a> and <a class="code" href="../../d9/de3/classTruthPhotonJet.html">TruthPhotonJet</a>. <a class="code" href="../../dc/d53/classPhotons.html">Photons</a> is <a class="code" href="../../d7/da4/namespaceKFPMath.html#a6d2496198d1982fd950acfb79033902b">a</a> similar analysis <span class="keyword">package </span>to PhotonJet with less of the overhead and is intended to be used with a single photon generator. TruthPhotonJet is also similar to PhotonJet but is intended to be used only with truth PYTHIA information. The purpose is to quickly generate and analyze truth PYTHIA events to determine e.g. the pT/eta reach of jets/photons, etc.</div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->

<!-- start footer part -->
<div id="nav-path" class="navpath">
	<!-- id is needed for treeview function! -->
	<ul>
		<li class="navelem"><a class="el" href="../../de/d7d/analysis_2blob_2master_2PhotonJet_2README_8md.html">README.md</a></li>
		<li class="footer">
		Built by <a href="mailto:jhuang@bnl.gov">Jin Huang</a></em>.
			updated: <em>Mon Feb 17 2020 04:18:26</em> using <a
			href="http://www.doxygen.org/index.html"> <img class="footer"
				src="../../doxygen.png" alt="doxygen" /></a> 1.8.2 
				with <a href="https://github.com/sPHENIX-Collaboration">sPHENIX GitHub integration</a>
		</li>
	</ul>
</div>
</body>
</html>
